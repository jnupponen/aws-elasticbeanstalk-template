# Beanstalk Template Demo

## Intro

This is demo for using AWS Elastic Beanstalk configured with CloudFormation. In this demo there are two **public** Web applications created from the same [beanstalk.yml](beanstalk.yml) CloudFormation template. Both will optionally get their own custom domain. SSH access is disabled (create security group for your instances if you want to use SSH).

## Demo App 1

See [demo-app-1/](demo-app-1/)

## Demo App 2

See [demo-app-2/](demo-app-2/)

## Requirements

### Requirements on the AWS account

-   Default VPC
-   Roles `aws-elasticbeanstalk-ec2-role` and `aws-elasticbeanstalk-service-role` are present. These roles are automatically generated by Beanstalk and if you don't have them you should create one application and environment in it manually in the Beanstalk Web Console. It doesn't matter what values you input in the Web Console and you can delete the application right away when its created.
-   (Optional) Route 54 Hosted Zone
-   AWS Region Ireland (eu-west-1) is assumed in the rest of this demo. Alias DNS record for custom domain name (above) is configured for eu-west-1 in [beanstalk.yml](beanstalk.yml). In real use case one should replace the `MyAliasHostedZoneId` parameter with Mapping from [here](https://docs.aws.amazon.com/general/latest/gr/rande.html)

### AWS command line interface

```
$ aws --version
aws-cli/1.14.45 Python/2.7.12 Linux/4.8.0-39-generic botocore/1.9.14
```

AWS cli installation guide [here](https://docs.aws.amazon.com/cli/latest/userguide/installing.html)

### Beanstalk command line interface

```
$ eb --version
EB CLI 3.12.4 (Python 2.7.1)
```

Elastic Beanstalk cli installation guide [here](https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/eb-cli3-install.html)

### AWS credentials file

```
cat ~/.aws/credentials

[example-account-dev]
aws_access_key_id=<insert your key here>
aws_secret_access_key=<insert your secret key here>

# This example-account-prod is optional not used in the demo
[example-account-prod]
aws_access_key_id=<insert your key here>
aws_secret_access_key=<insert your secret key here>
```

## Customizing Elastic Beanstalk

You can customize Elastic Beanstalk behavior by changing Properties.OptionSettings in [beanstalk.yml(beanstalk.yml) type AWS::ElasticBeanstalk::ConfigurationTemplate resouce block. See all available customization from [here](https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/command-options-general.html). You probably wan't to assign your instances in private subnets and Load balancer in public subnets. Also in some applications you might want to restrict access by adding [security groups](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-security-group.html).
